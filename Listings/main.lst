C51 COMPILER V9.54   MAIN                                                                  09/19/2025 21:42:36 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE src\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\System;.\src;.\Hardware) DEBU
                    -G OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <AT89X52.H>     //包含52头文件
   2          #include <Boebot.h>
   3          #include "motor.h"
   4          #include "uart.h"
   5          #include "ultrasonic.h"
   6          
   7          int qtis;
   8          char flag = 0;
   9          
  10          void main(void)
  11          {
  12   1              unsigned char record=0 + 2,j=0,ji_shu=0,angle=0;         //变量record指挥小车转弯情况，j,ji_shu用于计数，angle用
             -于记录角度。
  13   1              char ii = 0;
  14   1              delay_nms(2000);   //延时2秒
  15   1              Fast_forward(40);
  16   1              while(1)
  17   1              {
  18   2                      P0=0x0f;                //检测黑线                                                                                                                       
  19   2                      qtis=P0&0x0f;   //读取4个巡线传感器的值
  20   2                      Fast_forward(1);//前进一小步
  21   2                      switch(qtis)    //按照4个巡线传感器的值执行移动指令，巡线
  22   2                      {
  23   3                              case 1:turn(1550,1550);break;     //大幅向右转
  24   3                              case 2:          
  25   3                              case 3:turn(1550,1500);break;     //小幅向右转
  26   3      
  27   3                              case 8:turn(1450,1450);break;     //大幅向左转
  28   3                              case 4:turn(1500, 1480); break;   //小幅向左转
  29   3                              case 12:turn(1500,1450);break;    //小幅向左转
  30   3      
  31   3                              case 5:
  32   3                              case 6:
  33   3                              case 7:
  34   3                              case 10:
  35   3                              case 13:
  36   3                              case 14:
  37   3                              case 15:Fast_forward(6);break;    //向前2小步                   
  38   3                      }
  39   2                      
  40   2                      if(qtis==15)                                              //4个巡线传感器都检测的黑线,过中心点
  41   2                      {                                                                         
  42   3                              record++;                                                       //指挥变量自增
  43   3                              if(record%2==0 && record>0)
  44   3                                      flag=0;
  45   3                              switch(record)                                    //按照变量的值执行移动命令
  46   3                              {
  47   4                                      case 1:Fast_forward(12);turn_left_90();break;  //左转90度
  48   4                                      case 2:Fast_forward(15);turn_right_90();break; //右转90度
  49   4                                      case 3:Fast_forward(15);turn_left_45();break;  //前进20步，再左转45度
  50   4                                      case 4:Fast_forward(20);turn_right_45();break;  //前进30步，再右转45度，再前进15步。
  51   4                                      case 5:Fast_forward(15);break;
  52   4                                      case 6:Fast_forward(15);break;
  53   4                                      case 7:Fast_forward(15);turn_right_45();break;             //前进20步，再右转45度。
C51 COMPILER V9.54   MAIN                                                                  09/19/2025 21:42:36 PAGE 2   

  54   4                                      case 8:Fast_forward(18);turn_left_45();break; //前进20步，再左转45度，再前进13步。
  55   4                                      case 9:Fast_forward(15);turn_right_90();break;           //右转90度
  56   4                                      case 10:Fast_forward(15);turn_left_90();break;           //左转90度
  57   4                              }
  58   3                              ii=0;                                   //将ii变量清零
  59   3                      }
  60   2                      
  61   2                      if(record%2==0 && record>0 && flag==0)//指挥变量值为偶数，并且非零时才执行以下语句。
  62   2                      {
  63   3                              ii++;    
  64   3                              if(ii>30-j*5)                           //62小车把物块安放的位置做一定的间隔? 
  65   3                              {
  66   4                                      back(30);//32
  67   4                                      turn_back();
  68   4                                      flag=1;
  69   4                                      ii=0;
  70   4                                      j=j+1;
  71   4                              }
  72   3                      }
  73   2                      
  74   2                      if(record%2==1)         //小车检测到白点，取下物块后转
  75   2                      {
  76   3                              if(qtis==0)
  77   3                                      ii++;    
  78   3                              if(ii>1 && (qtis==0 || qtis ==4 ||qtis == 2||qtis == 5||qtis ==10 || qtis == 9 || qtis == 14 || qtis ==
             - 7))
  79   3                              {
  80   4                                       turn_back();
  81   4                                       ii=0;
  82   4                              }                                                                                                                                                                                                                                  
  83   3                      }
  84   2                      if(record==10)                                   //第九次4个巡线传感器都检测到黑线，则前进26步，再右转90度。
  85   2                      {
  86   3      //                      Fast_forward(10);
  87   3      //                      turn_right_90();
  88   3                              stop();break;   
  89   3                      }
  90   2                      
  91   2              }       
  92   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    465    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
