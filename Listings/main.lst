C51 COMPILER V9.54   MAIN                                                                  09/25/2025 19:08:40 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE src\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\System;.\src;.\Hardware) DEBU
                    -G OBJECTEXTEND PRINT(.\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <AT89X52.H>     
   2          #include <Boebot.h>
   3          #include "motor.h"
   4          #include "uart.h"
   5          #include "ultrasonic.h"
   6          
   7          int qtis;
   8          char flag = 0, flag_t = 1;
   9          
  10          
  11          void main(void)
  12          {
  13   1              unsigned char record=0, j=0,ji_shu=0,angle=0;
  14   1              char ii = 0;
  15   1              unsigned int dis;
  16   1              uart_Init();
  17   1      
  18   1              // delay_nms(2000);
  19   1              // Fast_forward(40);
  20   1              while(1)
  21   1              {
  22   2                      //InitTimer();          //给超声波计时
  23   2                      //dis = GetSonarDis();
  24   2      
  25   2                      //测试超声波
  26   2      //              printf("ultrasonic = %d\n", dis);
  27   2      //              delay_nms(1000);
  28   2      
  29   2                      /*第一阶段 把物块搬回缓冲区*/
  30   2                      P0=0x0f;                //检测黑线                                                                                                                   
  31   2                      qtis=P0&0x0f;   //读取4个巡线传感器的值
  32   2                      Fast_forward(1);//前进一小步
  33   2                      switch(qtis)    //按照4个巡线传感器的值执行移动指令，巡线
  34   2                      {
  35   3                              case 1:turn(1550,1550);break;     //大幅向右转
  36   3                              case 2:          
  37   3                              case 3:turn(1550,1500);break;     //小幅向右转
  38   3      
  39   3                              case 8:turn(1450,1450);break;     //大幅向左转
  40   3                              case 4:turn(1500, 1480); break;   //小幅向左转
  41   3                              case 12:turn(1500,1450);break;    //小幅向左转
  42   3      
  43   3                              case 5:
  44   3                              case 6:
  45   3                              case 7:
  46   3                              case 10:
  47   3                              case 13:
  48   3                              case 14:
  49   3                              case 15:Fast_forward(6);break;    //向前2小步                       
  50   3                      }
  51   2      
  52   2      
  53   2      //              /*测试搬运*/
  54   2      //              if(dis <= 3 && flag_t == 1)
C51 COMPILER V9.54   MAIN                                                                  09/25/2025 19:08:40 PAGE 2   

  55   2      //              {
  56   2      //                      turn_back();
  57   2      //                      flag_t = 0;
  58   2      //              }
  59   2      
  60   2      //              if (flag_t == 0)
  61   2      //              {
  62   2      //                      ii++;    
  63   2      //                      if(ii>30-j*6) 
  64   2      //                      {
  65   2      //                              back(30);//32
  66   2      //                              turn_back();
  67   2      //                              flag=1;
  68   2      //                              ii=0;
  69   2      //                              j=j+1;
  70   2      //                              flag_t = 1;
  71   2      //                      }
  72   2      //                      
  73   2      //              }
  74   2      
  75   2                      //测试qti     
  76   2                      if(qtis == 0)
  77   2                      {
  78   3                              ii++;
  79   3                      }
  80   2                      if(ii > 1 && qtis==0)
  81   2                      {
  82   3                              turn_back();
  83   3                              flag = 0;
  84   3                              ii = 0;
  85   3                      }
  86   2                      
  87   2                      
  88   2      
  89   2                      // if(qtis==15)                                   
  90   2                      // {                                              
  91   2                      //      record++;                                       
  92   2                      //      if(record%2==0 && record>0)
  93   2                      //              flag=0;
  94   2                      //      switch(record)                          
  95   2                      //      {
  96   2                      //              case 1:Fast_forward(12);turn_left_90();break;           //第一次到中心点左转90
  97   2                      //              case 2:Fast_forward(15);turn_right_90();break;
  98   2                      //              case 3:Fast_forward(15);turn_left_45();break;
  99   2                      //              case 4:Fast_forward(20);turn_right_45();break;  
 100   2                      //              case 5:Fast_forward(15);break;
 101   2                      //              case 6:Fast_forward(15);break;
 102   2                      //              case 7:Fast_forward(15);turn_right_45();break;             
 103   2                      //              case 8:Fast_forward(18);turn_left_45();break;
 104   2                      //              case 9:Fast_forward(15);turn_right_90();break;           
 105   2                      //              case 10:Fast_forward(15);turn_left_90();break;
 106   2                      //      }
 107   2                      //      ii=0;
 108   2                      // }
 109   2                      
 110   2                      // if(record%2==0 && record>0 && flag == 0)
 111   2                      // {
 112   2                      //      ii++;    
 113   2                      //      if(ii>30-j*5) 
 114   2                      //      {
 115   2                      //              back(30);//32
 116   2                      //              turn_back();
C51 COMPILER V9.54   MAIN                                                                  09/25/2025 19:08:40 PAGE 3   

 117   2                      //              flag=1;
 118   2                      //              ii=0;
 119   2                      //              j=j+1;
 120   2                      //      }
 121   2                      // }
 122   2                      
 123   2                      // if(record%2==1)              
 124   2                      // {
 125   2                      //      if(qtis==0)
 126   2                      //              ii++;    
 127   2                      //      if(ii>1 && (qtis==0 || qtis ==4 ||qtis == 2||qtis == 5||qtis ==10 || qtis == 9 || qtis == 14 || qtis
             - == 7))
 128   2                      //      {
 129   2                      //               turn_back();
 130   2                      //               ii=0;
 131   2                      //      }                                                                                                                          
 132   2                      // }
 133   2                      // if(record==10)                               
 134   2                      // {
 135   2                      //      //              Fast_forward(10);
 136   2                      //      //              turn_right_90();
 137   2                      //      stop();break;   
 138   2                      // }
 139   2                      
 140   2              }       
 141   1      }
*** WARNING C280 IN LINE 15 OF src\main.c: 'dis': unreferenced local variable


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    196    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
