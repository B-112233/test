C51 COMPILER V9.54   ULTRASONIC                                                            10/21/2025 15:22:01 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE ULTRASONIC
OBJECT MODULE PLACED IN .\Objects\ultrasonic.obj
COMPILER INVOKED BY: D:\Keil5\C51\BIN\C51.EXE Hardware\ultrasonic.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\System;.\src;.\Har
                    -dware) DEBUG OBJECTEXTEND PRINT(.\Listings\ultrasonic.lst) OBJECT(.\Objects\ultrasonic.obj)

line level    source

   1          #include <AT89X52.h>
   2          #include <uart.h>
   3          #include <stdio.h>
   4          #include <Boebot.h>
   5          
   6          #define TrigL P2_6       //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Åºï¿½
   7          #define EchoL P2_7       //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½echoï¿½ï¿½ï¿½ï¿½ï¿½Åºï¿½
   8          
   9          #define uchar unsigned char
  10          #define uint  unsigned int
  11          
  12          uchar timer_cnt=0;      // ï¿½ï¿½Â¼ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½Ð¶Ï´ï¿½ï¿½ï¿½
  13          uint sonar_used_time=0;
  14          /***********************************************************************/
  15          // ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½
  16          /***********************************************************************/
  17          void InitTimer(void)
  18          {
  19   1              TMOD |= 0x01;
  20   1          TH0 = 0x0;
  21   1          TL0 = 0x0;
  22   1          EA = 1;
  23   1          ET0 = 1;
  24   1          TR0 = 0;
  25   1      }
  26          /*
  27                  ï¿½ï¿½Ê±ï¿½ï¿½0ï¿½ï¿½ï¿½ï¿½Ð¶ï¿½
  28          */
  29          void Interrupt(void) interrupt 1
  30          {
  31   1              TR0 = 0;
  32   1      }
  33          /***********************************************************************/
  34          // ï¿½ï¿½àº¯ï¿½ï¿½
  35          // ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½posÊ±Îªï¿½ï¿½ï¿½ï¿½ï¿½ï¿½×°ï¿½ï¿½Î»ï¿½ï¿½Lï¿½ï¿½Fï¿½ï¿½Rï¿½Ö±ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ç°ï¿½ï
             -¿½Î»ï¿½ï¿½
  36          /***********************************************************************/
  37          
  38          unsigned int GetSonarDis(void)
  39          {
  40   1              uint dis=0; 
  41   1              uint high, low;
  42   1              TrigL=0;EchoL=0;  //ï¿½ï¿½I/Oï¿½ï¿½ï¿½Ãµï¿½
  43   1      
  44   1              TrigL=1;        //trigï¿½Ã¸ï¿½ ï¿½ï¿½ï¿½ï¿½10usï¿½Ä¸ßµï¿½Æ½ï¿½Åºï¿½ 
  45   1              delay_nus(25);   
  46   1              TrigL=0;
  47   1              while(EchoL == 0);
  48   1              TR0=1;    
  49   1              //ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ê±ï¿½ï¿½ï¿½ï¿½Ê¼ï¿½ï¿½Ê±
  50   1              while(EchoL == 1 && TR0 == 1);   //ï¿½È´ï¿½echoï¿½Ãµï¿½
  51   1              TR0 = 0;
  52   1              high = TH0 * 256;
  53   1              low = TL0;
C51 COMPILER V9.54   ULTRASONIC                                                            10/21/2025 15:22:01 PAGE 2   

  54   1              dis = (high + low) / 58;
  55   1              if(dis < 3){
  56   2                      dis = 0;
  57   2              }
  58   1              return dis;
  59   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     94    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
